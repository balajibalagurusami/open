<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Web AR Viewer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>
  <h1>View Model in AR</h1>
  <button id="launch-ar">Launch AR</button>

  <script>
    const modelUrlGLB = 'https://aecbimwork.s3.eu-north-1.amazonaws.com/files/model.glb';
    const modelUrlUSDZ = 'https://aecbimwork.s3.eu-north-1.amazonaws.com/files/model.usdz'; // <-- You need to convert your .glb to .usdz manually for iOS.

    function isIOS() {
      return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
    }

    document.getElementById('launch-ar').addEventListener('click', () => {
      if (isIOS()) {
        // Launch AR Quick Look for iOS (requires USDZ format)
        const anchor = document.createElement('a');
        anchor.setAttribute('rel', 'ar');
        anchor.setAttribute('href', modelUrlUSDZ);
        anchor.appendChild(document.createElement('img')); // Dummy img required
        document.body.appendChild(anchor);
        anchor.click();
        document.body.removeChild(anchor);
      } else {
        // Launch Scene Viewer for Android
        const sceneViewerUrl = `intent://arvr.google.com/scene-viewer/1.0?file=${encodeURIComponent(modelUrlGLB)}&mode=ar_preferred#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(location.href)};end;`;
        window.location.href = sceneViewerUrl;
      }
    });
  </script>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>CTC & Take-Home Calculator</title>
<style>
  body { font-family: Arial; max-width: 600px; margin: 20px auto; }
  input { width: 100%; padding: 8px; margin: 5px 0; }
  button { padding: 10px; width: 100%; margin-top: 10px; }
  .box { border: 1px solid #ccc; padding: 15px; margin-top: 20px; }
</style>
</head>
<body>

<h2>CTC & Take-Home Calculator (India New Regime 2025)</h2>

<h3>Income Details</h3>
<label>Current CTC (Annual)</label>
<input id="ctc" type="number">

<label>Expected Hike (%)</label>
<input id="hike" type="number" value="0">

<h3>Monthly Expenses</h3>
<label>Rent</label><input id="rent" type="number">
<label>Food</label><input id="food" type="number">
<label>Air Travel</label><input id="air" type="number">
<label>Daily Commute</label><input id="commute" type="number">
<label>Electricity</label><input id="electricity" type="number">
<label>Internet</label><input id="internet" type="number">
<label>EMI</label><input id="emi" type="number">

<button onclick="calc()">Calculate</button>

<div class="box" id="result"></div>

<script>
function taxNewRegime2025(income) {
    let tax = 0;
    let slabs = [
        [0, 400000, 0],
        [400000, 800000, 0.05],
        [800000, 1200000, 0.10],
        [1200000, 1600000, 0.15],
        [1600000, 2000000, 0.20],
        [2000000, Infinity, 0.30]
    ];
    for (let s of slabs) {
        let [low, high, rate] = s;
        if (income > low) {
            let taxable = Math.min(income, high) - low;
            tax += taxable * rate;
        }
    }
    return tax;
}

function calc() {
    // Always read from DOM explicitly - do NOT reuse id names
    const currentCTC = Number(document.getElementById("ctc").value || 0);
    const hikePct    = Number(document.getElementById("hike").value || 0);

    if (!currentCTC) {
        document.getElementById("result").innerHTML = "<b>Enter a valid Current CTC.</b>";
        return;
    }

    const newCTC       = currentCTC * (1 + hikePct / 100);
    const gainAnnual   = newCTC - currentCTC;
    const gainMonthly  = gainAnnual / 12;

    const tax          = taxNewRegime2025(newCTC);
    const takeHomeAnnual  = newCTC - tax;
    const takeHomeMonthly = takeHomeAnnual / 12;

    const rent        = Number(document.getElementById("rent").value || 0);
    const food        = Number(document.getElementById("food").value || 0);
    const air         = Number(document.getElementById("air").value || 0);
    const commute     = Number(document.getElementById("commute").value || 0);
    const electricity = Number(document.getElementById("electricity").value || 0);
    const internet    = Number(document.getElementById("internet").value || 0);
    const emi         = Number(document.getElementById("emi").value || 0);

    const expenses = rent + food + air + commute + electricity + internet + emi;
    const savings  = takeHomeMonthly - expenses;

    document.getElementById("result").innerHTML = `
        <h3>Results</h3>
        <b>Current CTC (Annual):</b> ₹${currentCTC.toLocaleString()} <br>
        <b>New CTC (Annual):</b> ₹${newCTC.toLocaleString()} <br>
        <b>Annual Gain:</b> ₹${gainAnnual.toLocaleString()} <br>
        <b>Monthly Gain:</b> ₹${gainMonthly.toLocaleString()} <br><br>

        <b>Income Tax (Annual):</b> ₹${tax.toLocaleString()} <br>
        <b>Take-Home (Annual):</b> ₹${takeHomeAnnual.toLocaleString()} <br>
        <b>Take-Home (Monthly):</b> ₹${takeHomeMonthly.toLocaleString()} <br><br>

        <b>Total Monthly Expenses:</b> ₹${expenses.toLocaleString()} <br>
        <b>Monthly Savings:</b> <span style="color:${savings>=0 ? "green" : "red"}">
            ₹${savings.toLocaleString()}
        </span>
    `;
}
</script>
</body>
</html>